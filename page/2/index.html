<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="记录我的前端学习">
<meta property="og:type" content="website">
<meta property="og:title" content="Hello!">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hello!">
<meta property="og:description" content="记录我的前端学习">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Geylnu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Hello!</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hello!</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/29/%E5%A6%82%E4%BD%95%E5%9C%A8touch%E4%BA%8B%E4%BB%B6%E4%B8%AD%E6%A8%A1%E6%8B%9Fmouse%E4%BA%8B%E4%BB%B6%E4%B8%AD%E7%9A%84offsetX-offsetY/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Geylnu">
      <meta itemprop="description" content="记录我的前端学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello!">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/29/%E5%A6%82%E4%BD%95%E5%9C%A8touch%E4%BA%8B%E4%BB%B6%E4%B8%AD%E6%A8%A1%E6%8B%9Fmouse%E4%BA%8B%E4%BB%B6%E4%B8%AD%E7%9A%84offsetX-offsetY/" class="post-title-link" itemprop="url">如何在touch事件中模拟mouse事件中的offsetX offsetY</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-29 22:49:31" itemprop="dateCreated datePublished" datetime="2019-07-29T22:49:31+00:00">2019-07-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-31 16:27:02" itemprop="dateModified" datetime="2021-05-31T16:27:02+00:00">2021-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-起因"><a href="#1-起因" class="headerlink" title="1. 起因"></a>1. 起因</h1><p>最近想制作一个在散开的纸面画画的效果，纸面会按一定角度倾斜，就像下面这样↓<br><img src="http://cdn.geylnu.com/canvas.png" alt="canvas"><br>也就是给canvas元素加了<code>transform: roate(-2deg)</code></p>
<h1 id="2-电脑端实现"><a href="#2-电脑端实现" class="headerlink" title="2. 电脑端实现"></a>2. 电脑端实现</h1><p>在电脑端很容易实现,鼠标事件中有<code>offsetX Y</code>，能够获得鼠标位置相对于目标节点的位置，可以简单理解为相对于元素左上角的坐标。获得坐标后，再按坐标绘制到Canvas上，一切就OK了，不过到了移动端就有点麻烦了。</p>
<h1 id="3-移动端实现"><a href="#3-移动端实现" class="headerlink" title="3. 移动端实现"></a>3. 移动端实现</h1><p>移动端touch事件有以下几个属性</p>
<ul>
<li>ClientX Y 相对于视口的坐标</li>
<li>pageX Y 相对于页面左上角原点的坐标</li>
<li>screenX Y 相对于屏幕的坐标标</li>
<li>movementX Y 相对于上一次坐标的坐标</li>
</ul>
<p>然而就是没有<code>offsetX Y</code>，怎么办，自己模拟试试？</p>
<h2 id="3-1-第一次模拟"><a href="#3-1-第一次模拟" class="headerlink" title="3.1 第一次模拟"></a>3.1 第一次模拟</h2><ol>
<li>获得<code>pageX Y</code></li>
<li>通过<code>offsetTop left</code>计算元素左上角的顶点位置<code>vertex</code></li>
<li>计算相对坐标</li>
</ol>
<p>代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getVertexPosition</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> currentTarget = el</span><br><span class="line">    <span class="keyword">let</span> top = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> (currentTarget !== <span class="literal">null</span>) &#123;</span><br><span class="line">        top += currentTarget.offsetTop</span><br><span class="line">        left += currentTarget.offsetLeft</span><br><span class="line">        currentTarget = currentTarget.offsetParent</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; top, left &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vertex = getVertexPosition(canvas)</span><br><span class="line">canvas.addEventListener(<span class="string">&#x27;touchmove&#x27;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> offsetX = e.pageX-vertex.left</span><br><span class="line">    <span class="keyword">let</span> offsetY = e.pageX-vertex.top</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>在页面没有设置任何<code>transform</code>属性的情况下，这个代码是生效的，能获得正确的坐标点。<br>然而如果父元素或目标元素有任何<code>transform</code>属性，坐标就会错误，比如本文中的canvas元素，设置了<code>transform: roate(-2deg)</code>,坐标就发生了偏移。<br>随后搜索了一下是否有类似的解决方案，结果都是这样的代码，都不能对<code>transform</code>元素生效。</p>
<h2 id="3-2-偏移原因"><a href="#3-2-偏移原因" class="headerlink" title="3.2 偏移原因"></a>3.2 偏移原因</h2><p>偏移原因是因为变换后，元素的坐标轴已经改变了，而我们得到的坐标还是变换前的坐标，自然而然就发生错误了。<br><img src="http://cdn.geylnu.com/reason.png" alt="坐标图"><br>如图所示，实际触摸点是绿色，本应也绘制在绿色坐标点，但是我们现在的坐标系仍然是之前的坐标系，就导致了绘制点相对于原来的坐标点绘制，也即紫色，导致绘制偏移。<br>解决办法也很简单，将触摸点按照新坐标系计算得到值，就是真实的相对坐标了。<br><strong>步骤：</strong></p>
<ol>
<li>获得点击坐标（pageX pageY）</li>
<li>获得旋转角度 旋转中心</li>
<li>将旋转中心于元素顶点坐标相加，得到整个页面的旋转中心</li>
<li>旋转相同负角度（逆运算），将点击坐标还原到真实的坐标系</li>
<li>减去顶点坐标，获得真实相对坐标。</li>
</ol>
<h2 id="第二次模拟"><a href="#第二次模拟" class="headerlink" title="第二次模拟"></a>第二次模拟</h2><ol>
<li><p>首先获得计算后的样式，获得<code>transform</code>相关属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> style = <span class="built_in">window</span>.getComputedStyle(el)</span><br><span class="line"><span class="built_in">console</span>.log(style) </span><br></pre></td></tr></table></figure>
<p>获得的<code>transform</code>属性如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">transform: &quot;matrix(0.999391, -0.0348995, 0.0348995, 0.999391, 0, 0)&quot;</span><br><span class="line">transformBox: &quot;view-box&quot;</span><br><span class="line">transformOrigin: &quot;160px 240px&quot;</span><br><span class="line">transformStyle: &quot;flat&quot;</span><br></pre></td></tr></table></figure>
<p>关于<code>transform:matrix</code>以及如何理解查看<a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/wordpress/2012/06/css3-transform-matrix-%E7%9F%A9%E9%98%B5/">张鑫旭的文章</a>。<br>简而言之，就是<code>transform</code>属性都是通过<code>transform:matrix</code>进行矩阵计算得到坐标的。</p>
</li>
<li><p>解析transform属性<br>由于这里涉及到矩阵运算，需要引入<a target="_blank" rel="noopener" href="https://mathjs.org/">math.js</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> transform = style.transform</span><br><span class="line"><span class="keyword">let</span> transformOrigin = style.transformOrigin</span><br><span class="line"><span class="keyword">let</span> origin = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;</span><br><span class="line"><span class="keyword">let</span> matrix = math.ones([<span class="number">3</span>, <span class="number">3</span>])</span><br><span class="line"><span class="keyword">if</span> (transform !== <span class="string">&#x27;none&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> originArray = transformOrigin.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    origin.x = <span class="built_in">parseInt</span>(originArray[<span class="number">0</span>])</span><br><span class="line">    origin.y = <span class="built_in">parseInt</span>(originArray[<span class="number">1</span>]) <span class="comment">//矩阵的坐标变化是基于变换中心得。</span></span><br><span class="line">    <span class="keyword">let</span> matrixString = transform.match(<span class="regexp">/\(([^)]*)\)/</span>)[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">let</span> stringArray = matrixString.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> temp = []</span><br><span class="line">    stringArray.forEach(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        temp.push(<span class="built_in">parseFloat</span>(value.trim()))</span><br><span class="line">    &#125;)</span><br><span class="line">    temp = [</span><br><span class="line">        [temp[<span class="number">0</span>], temp[<span class="number">2</span>], temp[<span class="number">4</span>]],</span><br><span class="line">        [temp[<span class="number">1</span>], temp[<span class="number">3</span>], temp[<span class="number">5</span>]],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">    ]</span><br><span class="line">    matrix = math.inv(temp) <span class="comment">//进行逆矩阵</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    matrix = [[<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样我们就得到了原变换矩阵的逆矩阵和变换中心，就能将触摸点正确的还原到原坐标系了</p>
</li>
<li><p>计算</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">computPosition</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; matrix, origin, <span class="attr">vertex</span>: &#123; top, left &#125;,<span class="attr">ponit</span>:&#123;x,y&#125; &#125; = obj</span><br><span class="line">    x = x - left - origin.x</span><br><span class="line">    y = y - top - origin.y</span><br><span class="line">    <span class="keyword">let</span> result = math.multiply(matrix, [x, y, <span class="number">1</span>])</span><br><span class="line">    x = result[<span class="number">0</span>] + origin.x</span><br><span class="line">    y = result[<span class="number">1</span>] + origin.y</span><br><span class="line">    <span class="keyword">return</span> (x,y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>实际实现</p>
<ol>
<li>由于子元素会受到父元素变换影响，因此需要遍历所有父元素</li>
<li>由于<code>getComputStyle()</code>和获得顶点坐标有较大性能消耗，最好将相关参数缓存起来<br>实际代码实现见此<a target="_blank" rel="noopener" href="https://github.com/Geylnu/touch-offset">https://github.com/Geylnu/touch-offset</a></li>
</ol>
</li>
</ol>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>W3C给出了没有为touch事件添加<code>offsetX Y</code>的原因<a target="_blank" rel="noopener" href="https://github.com/w3c/touch-events/issues/62">https://github.com/w3c/touch-events/issues/62</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/15/%E8%99%9A%E6%8B%9FDOM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Geylnu">
      <meta itemprop="description" content="记录我的前端学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello!">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/15/%E8%99%9A%E6%8B%9FDOM/" class="post-title-link" itemprop="url">虚拟DOM</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-01-15 11:13:39" itemprop="dateCreated datePublished" datetime="2019-01-15T11:13:39+00:00">2019-01-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-31 16:27:02" itemprop="dateModified" datetime="2021-05-31T16:27:02+00:00">2021-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="虚拟DOM是什么？"><a href="#虚拟DOM是什么？" class="headerlink" title="虚拟DOM是什么？"></a>虚拟DOM是什么？</h1><p>虚拟DOM其实就是在原有DOM的基础中，在js中再做一层DOM的抽象。</p>
<h1 id="虚拟DOM有什么用？"><a href="#虚拟DOM有什么用？" class="headerlink" title="虚拟DOM有什么用？"></a>虚拟DOM有什么用？</h1><p>在一些需要大量更改DOM的情况下，比如更新表格内的内容，重新排序等，会引起重绘、重排、引起大量的性能消耗，虚拟DOM就是针对这个问题的一个解决方案，在更改前都是针对虚拟DOM进行操作，不对真实DOM进行更改，更改完成后使用diff算法对比DOM树，只操作需要更改的DOM节点，减小 性能开销。</p>
<h1 id="虚拟DOM怎么用？"><a href="#虚拟DOM怎么用？" class="headerlink" title="虚拟DOM怎么用？"></a>虚拟DOM怎么用？</h1><p>首先需要创建一个类似的虚拟DOM抽象数据结构</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VNode</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">tag, children, text</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.tag = tag</span><br><span class="line">    <span class="built_in">this</span>.text = text</span><br><span class="line">    <span class="built_in">this</span>.children = children</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">this</span>.tag === <span class="string">&#x27;#text&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">document</span>.createTextNode(<span class="built_in">this</span>.text)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> el = <span class="built_in">document</span>.createElement(<span class="built_in">this</span>.tag)</span><br><span class="line">    <span class="built_in">this</span>.children.forEach(<span class="function"><span class="params">vChild</span> =&gt;</span> &#123;</span><br><span class="line">      el.appendChild(vChild.render())</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> el</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">v</span>(<span class="params">tag, children, text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> children === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    text = children</span><br><span class="line">    children = []</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> VNode(tag, children, text)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里定义一个简单虚拟node类，拥有本元素和子节点，拥有<code>render()</code>函数。</p>
<p>改变使用diff算法对比</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">patchElement</span>(<span class="params">parent, newVNode, oldVNode, index = <span class="number">0</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!oldVNode) &#123;</span><br><span class="line">    parent.appendChild(newVNode.render())</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(!newVNode) &#123;</span><br><span class="line">    parent.removeChild(parent.childNodes[index])</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(newVNode.tag !== oldVNode.tag || newVNode.text !== oldVNode.text) &#123;</span><br><span class="line">    parent.replaceChild(newVNode.render(), parent.childNodes[index])</span><br><span class="line">  &#125;  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; newVNode.children.length || i &lt; oldVNode.children.length; i++) &#123;</span><br><span class="line">      patchElement(parent.childNodes[index], newVNode.children[i], oldVNode.children[i], i)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实际远远比这个复杂，拥有更多细节要处理，不过理解的话够用了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/26/%E9%A3%8E%E9%99%A2%E7%AC%94%E8%AE%B0%E6%9C%AC%E9%80%89%E8%B4%AD%E6%8C%87%E5%8D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Geylnu">
      <meta itemprop="description" content="记录我的前端学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello!">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/07/26/%E9%A3%8E%E9%99%A2%E7%AC%94%E8%AE%B0%E6%9C%AC%E9%80%89%E8%B4%AD%E6%8C%87%E5%8D%97/" class="post-title-link" itemprop="url">风院电脑选购指南</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-07-26 14:55:37" itemprop="dateCreated datePublished" datetime="2018-07-26T14:55:37+00:00">2018-07-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-31 16:27:02" itemprop="dateModified" datetime="2021-05-31T16:27:02+00:00">2021-05-31</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>本文主要简单介绍一下风景园林/环境设计专业软件需要啥子具体要求，顺带科普一下参数具体有什么用</p>
<h2 id="软件篇"><a href="#软件篇" class="headerlink" title="软件篇"></a>软件篇</h2><p>我们专业主要使用的软件是以下几个</p>
<ul>
<li><p>CAD<br>  2019版本官方配置表</p>
<ul>
<li>cpu 2.5-2.9Ghz处理器  建议：3+Ghz处理器</li>
<li>内存 8GB              建议：16GB</li>
<li>显卡 显存1Gb,29Gb/s带宽,与DirectX 11 兼容 建议：显存4GB，106GB/s带宽，与 DirectX 11 兼容<br>来源：<a target="_blank" rel="noopener" href="https://knowledge.autodesk.com/zh-hans/support/autocad/learn-explore/caas/sfdcarticles/sfdcarticles/CHS/System-requirements-for-AutoCAD-2019-including-Specialized-Toolsets.html">AutoCAD系统要求</a></li>
</ul>
<p>  总结：cpu这里的意思就是CPU主频尽可能的高，多核心多线程对于速度不会有太大提升，对于显卡的要求很粗略，只是需要一个快速且大的显存，目前一般的独立显卡都能满足这个要求，实际上显卡对于CAD来说并不重要。内存自然是越大越好，8G温饱，16G小康</p>
</li>
<li><p>PS<br>  2018版本官方配置表</p>
<ul>
<li>cpu Intel® Core 2 或 AMD Athlon® 64 处理器；2 GHz 或更快处理器</li>
<li>内存 2GB或更大RAM，推荐8GB</li>
<li>显卡 支持OpenGL 2.0<br>  在其<a target="_blank" rel="noopener" href="https://helpx.adobe.com/cn/photoshop/kb/photoshop-cc-gpu-card-faq.html">帮助页面</a>还给出了更多的解释<ul>
<li>最小显存512MB,建议显存2GB<br>来源：<a target="_blank" rel="noopener" href="https://helpx.adobe.com/cn/photoshop/system-requirements.html">系统要求|Photoshop</a></li>
</ul>
</li>
</ul>
<p>  总结：PS的cpu这里给出的配置相当模糊，我去查询了第三方测评。第三方测评的意见认为，PS多线程优化仍然不够好，大量的核心并不能明显提升PS性能，但是第8代CPU由于直接多了两个物理核心，尽管优化不好，但仍然有看见的提升，Core i7 8700K比Core i7 7700K快9-14%</p>
<p>  由于PS需要处理大量高质量素材文件，非常占用内存和暂存盘空间，对于PS来说，更大的内存空间，更高的内存频率能够明显提高其性能表现。由于内存条较为昂贵，在不升级的情况下，把固态硬盘作为PS的暂存盘也是提高其性能的一个手段.</p>
<p>  PS对于显卡的要求并不高，参考官方的帮助页面，部分对于图像变形，模糊，选择和蒙版会使用GPU进行加速，一些滤镜效果必须使用显卡，但是要求并不高，集成显卡就已经能较好完成大部分的工作，一般的独立显卡，如1050，部分功能的确会相比集成显卡有更大的提升（30%），但更高的显卡，对于提升整体性能表现的帮助相当小。</p>
</li>
<li><p>SU<br>  SketchUp Pro 2018官方配置表</p>
<ul>
<li>cpu 1Ghz处理器 推荐2G+hz处理器</li>
<li>内存 4GB 推荐8+GB</li>
<li>显卡 OpenGL 3.0或更高，显存512MB及以上<br>来源：<a target="_blank" rel="noopener" href="https://help.sketchup.com/en/sketchup/sketchup-hardware-and-software-requirements">SketchUp Hardware and Software Requirements</a></li>
</ul>
<p>  总结：su做为一个3D建模软件，把一个任务拆开由多个线程负责的优化是十分困难的，多核CPU不会为它带来提升，单核性能决定了它的性能表现。SU对于显卡的要求很模糊，我去其官方社区找到了答案，SU在大多数情况下，中档的显卡和顶级的显卡，差别是很轻微而不明显的，在SU中视窗内显示的模型由显卡和CPU共同管理，显卡负责模型的光线显示效果（例如阴影，纹理等），cpu负责几何体的生成（如面，边缘），当模型越来越多时，cpu性能就会构成瓶颈。<br>  除此之外，绘图卡（专业卡）与游戏卡相比，不会带来更好的性能变现，反而贵很多。</p>
</li>
<li><p>v-Ray</p>
<ul>
<li>cpu 奔腾4及以上，所有支持SSE3指令集的CPU</li>
<li>内存 4GB和最低4GB的虚拟内存 ，推荐8GB及以上和8GB以上虚拟内存</li>
<li>显卡 无<br>来源：<a href="view-source:https://docs.chaosgroup.com/display/VRAYSKETCHUP/System+Requirements#SystemRequirements-Windows">System Requirements - V-Ray for SketchUp</a></li>
</ul>
<p>  总结：这个配置实际上是一个能装vray的配置，实际上要看具体硬件。v-ray有两种渲染模式，CPU渲染和GPU渲染，CPU渲染模式很成熟了，目前大多都是CPU渲染模式，vray利用CPU进行渲染时，会充分利用所有线程，榨干cpu所有性能，对于vray cpu 渲染来说，在频率差不多的情况下，选择具有多核多线程的cpu能更好的提高渲染速度。<br>  v-ray还支持使用GPU渲染，使用GPU渲染速度更快（如果显卡比较好的话），但兼容性没有传统的CPU渲染好，可能出现不正确的渲染结果，不过可以使用这个模式来快速预览渲染效果。</p>
<p>  无论那种模式，在渲染时都会使用大量贴图文件和产生渲染后的数据，使用cpu渲染会去占用大量的内存和虚拟内存，使用GPU渲染会占用大量的显存。建议至少8G的内存，高参数、大场景的情况下会占用更多的内存。</p>
</li>
<li><p>Lumion<br>  Lumion8 官方配置表</p>
<ul>
<li>显卡 最低2,000 PassMark得分，2GB显存，支持DirectX 11或更高，推荐8,000 PassMark得分，6GB或更多显存</li>
<li>cpu<br>  最低:理想主频为3.0+ Ghz<br>  推荐:尽可能高的主频，理想主频为4.0+ GHz， 更低的主频会对GTX 1080 或 Titan X构成瓶颈，超过四个cpu核心不会带来性能提高，像 i7-4790K i7-6700K  i7-7700K这种主频为4.0+Ghz的CPU是个好的选择，低于3.4G+的至强系列处理器则不被推荐。</li>
<li>内存<br>  最低 8Gb(简单场景)，并且尽可能高的内存频率<br>  推荐 16GB，尽可能高的内存频率</li>
<li>more<br>  Lumion 官方非常棒，给出了相当详尽的配置建议，他们自己也推荐了笔记本，pc配置，品牌台式机，甚至配件价格，推荐去看看他们的原文。<br>来源：<a target="_blank" rel="noopener" href="https://lumion.com/system-requirements.html">system-requirements</a></li>
</ul>
<p>  总结：官方非常棒，不需要总结了，这里我单独说下PassMark得分，可以去</p>
</li>
<li><p>3Ds MAX</p>
<ul>
<li>cpu 支持 SSE4.2 指令集的 64 位 Intel® 或 AMD® 多核处理器</li>
<li>显卡 官方给了一个建议<a target="_blank" rel="noopener" href="https://knowledge.autodesk.com/sites/default/files/file_downloads/3dsmax2019_GFX_ResultsJun2018.pdf">显卡列表</a></li>
<li>内存 至少 4 GB RAM（建议使用 8 GB 或更大空间）</li>
</ul>
<p>  总结：3dmax官方这里给出的数据也很少，主要因为3ds Max自带渲染引擎，渲染引擎对cpu的要求自然没有上限了，3dmax在建模的时候仍然主要依靠单个CPU核心，不过显卡能够提供更多的帮助。渲染的话同vray,可以GPU和CPU，值得注意的是同价格的游戏卡与专业卡的表现几乎差不多，你不应该选择专业卡。</p>
</li>
<li><p>more 还有许多其它软件，这里不再列举，如果你想可以去自己查询哟~ 网络最大的百科全书！</p>
<h2 id="硬件篇"><a href="#硬件篇" class="headerlink" title="硬件篇"></a>硬件篇</h2><p>总体来说，计算机的核心功能只有两个，计算和储存，计算机的大量部件都是为这两者服务的。计算机的计算功能一般是由cpu(中央处理器)和显卡提供的，而储存功能则有多个部件实现。</p>
</li>
<li><p>cpu(中央处理器)<br>cpu是计算机的核心，就像人的大脑一样，处理各个部件传来的数据，对数据进行计算后返回结果；影响cpu快慢有很多因素，架构，指令集，主频，物理核心数等，但是一般来说同代处理器相同系列，主要看的是主频和核心数。</p>
<ul>
<li>主频<br>主频以Hz为单位，我们常常见到的是2.6Ghz，4.0Ghz这种，对于主频的理解，可以理解为cpu就是一个大工厂，主频就是这个大工厂的的工人生产一个东西有多快。</li>
</ul>
<p>  cpu的频率不是固定的，可以在一定范围内自动或手动调节，频率越高，会带来更高的功耗和更多的热量。笔记本由于各个厂商的设计不同，散热能力强弱不一，能够提供的功耗也不一样，同一cpu的性能表现也会不一样。</p>
<ul>
<li><p>核心数<br>核心数就是通常说的几核cpu，代表的是cpu工厂有几个工人一起生产，值得注意的是有多少个核心并不意味着能力的翻倍提高，因为一个软件运行时的工作，很难分配给不同核心，往往还是只由少数几个核心负责，多核心对于优化差的软件来说没有明显提高。</p>
<ul>
<li><p>睿频<br>睿频就是多核cpu提高那些优化差的软件的方法，通俗的来说，就是cpu这个大工厂接了个只能一个人（单核心）单独干的活，而其它工人就闲着了，cpu觉得这不行，干脆让其它几个工人不干了，把工资（能提供的功耗）交给正在干活的工人（核心），让工人干的更起劲（单核的主频就提高了），也就干的更快了。</p>
</li>
<li><p>超线程<br>超线程技术和睿频技术相反，是把一个核心分成两个线程（之前是一个核心对应一个线程），通俗来说，就是给工人（核心）点工具，让它一个人做两个人的活，虽然干的没一个人做一件事那么快，但总体来说做的更多了（无情老板压榨员工），超线程技术会略微降低cpu主频。</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>内存<br>  内存也是电脑至关重要的部件，也是程序运行时所在的空间。计算机计算首先得得到数据，就像工人工作必须得到零件一样，快速的得到数据对于提高计算机速度有很大的帮助，对于我们平时一些小操作卡顿，往往并不是cpu算的太慢了，而是数据传给cpu的时间太久了。 </p>
<p>  但是储存的价格实际上极其昂贵，比如位于cpu上速度极快的L1缓存大概只有几十kb，稍微慢一点的L2缓存有几百kb，更大更慢的的L3则有几MB的样子，那我几百G的小姐姐怎么办？这里就要引入计算机存储的局部性原理了，局部性原理表示计算机中使用的数据，如果第一次被使用，第二次被使用，那块数据第三次也会被使用，简单的说就是计算机使用的数据大量都是重复的，我们可以只把最经常用到的数据存在最快的空间中，不经常的存在慢一些的空间中，这样就可以省储存空间了。</p>
<p>  运用这个原理，现代计算机就设计出了分级的储存架构。cpu自己拥有一部分缓存的能力，分为L1,L2,L3,速度分别递减，容量递增，随后是内存，容量很大多了，比如4G 8G 16G，但是比cpu的缓存慢多了(差了几个量级)，不过价格也降下来了，几百元不等，以上都是缓存，由于物理上的设计，其实并不能长久储存数据，一断电（关机）数据就会消失，真正储存数据的是硬盘，详细看硬盘章节。<br>  整个储存结构呈金字塔型，越上面速度越快，空间越少，存储的越常用的数据。</p>
<p>  通俗的说就是数据就是零件，拿给cpu大厂加工，常用的零件会被放到cpu大产的内部的仓库，cpu工厂的工人工作直接去取就是了，由于空间有限，这些仓库都非常非常小。内存就是一个远离cpu的另外仓库，空间大多了，不过距离很远，拿到cpu工厂要很久，更远的就是硬盘了，与cpu工厂的距离几乎不可想象了，所以一般要做什么（软件运行 ）都会先拿到内存仓库作为中转。</p>
<ul>
<li>内存频率 越快内存交换数据的能力越强，能够更快的把硬盘数据存入内存。</li>
<li>虚拟内存 由于内存实际上对于我们的计算机来说还是太少，现在一个浏览器都能占上G的内存，那么多程序，都要用内存，可能会超出实际内存，这时怎么办？系统会在硬盘上划出一块空间，这块空间就叫虚拟内存，如果内存快要满了，就把一部分它认为暂时不会工作的程序的内存移入虚拟内存，腾给其它程序用，程序要工作了，就又把它移回进内存，虚拟内存是内存不足的无奈之举，通常还是建议使用更大的内存。</li>
</ul>
</li>
<li><p>显卡<br>  cpu是个全能手，什么都能算，但是对于浮点数（就是带小数点的数）计算不是很擅长，而对图形的运算常常涉及到大量浮点数运算（比如求三角形的斜边长），特别涉及到3D的图形，cpu来计算会慢死，显卡（GPU）就是为了解决这个问题，显卡拥有超多简化的核心，这些核心设计出来就只是为了进行浮点数运算，可以做的特别小，特别多，一个显卡里面可以有上千个这种微型处理器（官方称之为流处理器）。CPU与GPU的关系就像人脑和计算器一样，一个什么都能做，但是就计算而言没计算器厉害。</p>
<p>  评价显卡的性能基本和cpu一致，不过显卡单个核心的主频远远低于CPU，但是核心数远远高于CPU，由于GPU做的事很单一，通过跑分来评测其性能是一个很好的办法。</p>
<p>  显卡主要分为两种，为集成显卡和独立显卡</p>
<ul>
<li><p>集成显卡<br>  一般指的就是cpu内置的显卡，一般比较弱，不过日常看看视频，玩玩小游戏，最低画质的网游还是可行的，GPU和CPU一样，计算也需要先把数据传给它，和内存称呼类似，我们把显卡所使用的快速存储空间叫做显存，集成显卡没有独立的显存，而是把内存一部分当做自己的显存，这部分通常非常小，一般只有几百MB</p>
</li>
<li><p>独立显卡<br>  更加强大的显卡，目前游戏显卡主流就两家，AMD和NVIDIA（英伟达），NVIDIA比较强势。独立显卡拥有自己独立的散热器，独立的供电，独立的显存（主流1G或更多），CPU享受的待遇它都有。</p>
<p>  独立显卡根据用途还可以分为游戏卡，绘图卡（专业卡），和计算卡，游戏卡就是我们平常使用的显卡，很擅长一帧帧画面粗略的快速计算，绘图卡则经过优化，更擅长绘图软件中的大量顶点的空间计算，值得注意的是，事实上专业卡与游戏卡并没太多不一样，绘图卡在绘图领域表现得更好，更多是因为在驱动层面对专业软件做了更好的适配。计算卡则是专门用来计算大量数据，主要用在科学计算和人工智能领域，一般人不需要。</p>
</li>
</ul>
</li>
<li><p>硬盘<br>  硬盘是我们计算机中最后一级存储结构，是最慢，也是容量最大的一级，计算机实际运行中，会先将硬盘数据读入内存，方便更快的与cpu进行数据交换，而程序运行中最常使用的指令这些数据，会被缓存在cpu自带的缓存中。</p>
<p>  硬盘分为两种硬盘</p>
<ul>
<li>机械硬盘 通过磁头划过磁盘得到数据，速度主要看单碟容量和磁盘碟片的转速度，消费级主要分为5400转和7200转，一般来说容量越大，转速越高，速度也就越快。</li>
<li>固态硬盘 固态硬盘使用的是闪存颗粒来储存数据，相比机械硬盘，速度有极大的提升，特别是在大量小文件写入/读取上。</li>
</ul>
<p>  由于固态硬盘的价格比较昂贵，目前通用的方法是一个128或256的固态硬盘作为C盘，软件主要安装在C盘里，另外配一个大容量的机械盘，用来存电影，游戏这些庞大且不常用的数据。</p>
</li>
<li><p>屏幕<br>  由于屏幕对于设计行业来说相当重要，我这里单独讲下屏幕<br>  我们说屏幕，主要说的是屏幕的面板，屏幕面板的参数觉得我们视觉体验。</p>
<ul>
<li><p>面板类型<br>  主流的两大屏幕面板类型是TN屏和IPS屏</p>
<ul>
<li>TN屏：窄视角，色域低，屏幕响应时间短 主要作为游戏屏幕（主要还是便宜）</li>
<li>IPS屏：宽视角 色域低，屏幕响应时间略长 比较综合的屏幕</li>
<li>这里主要说的是低端屏幕面板，高端则很不一样</li>
</ul>
</li>
<li><p>色域<br>色域是对于我们设计领域最重要的一个属性，色域是一种计算机对颜色编码的方法，不同色域拥有不同的对纯色的定义和不同的色彩范围。<br>目前主流有以下几个色域标准：</p>
<ul>
<li>sRGB 是微软与惠普与1996年开发定下的色域标准，是目前世界上广泛使用的色域标准，手机，电脑默认都是这个色域标准，不是该色域标准的显示屏，需要载入对应的色彩管理配置文件，否则会使用近似的色彩代替，带来色彩的偏差。也因为这个原因，一般我们普通使用只需要使用一个尽可能覆盖100%sRGB标准色域的的显示屏就好了（其实达到95%以上的sRGB覆盖就算是专业级了）</li>
<li>NTSC 一个很老的彩色电视标准实际上目前已经很少使用了，但是一般测评和厂商展示数据都是使用这个标准,NTSC标准色域的色彩范围比sRGB大，并且大部分和sRGB重合，sRGB大约占NTSC标准的72%，所以我们经常说希望笔记本色域达到72%NTSC,但是实际上72%NTSC并不等于100%sRGB,可能是72%NTSC色域中的一部分颜色在100%sRGB色域显示之外，评测根据缺失和多出来的颜色，会说偏绿之类的结果，实际意思是相对于sRGB来说，色域覆盖偏向绿色。</li>
<li>adobeRGB adobe推出的色域标准，色彩范围略微超过NTSC，对于CMYK打印色域标准有更好的兼容性，而且由于adobe全家桶存在，对自己的adobeRGB兼容也很好，专业的平面设计领域可以使用adobeRGB。</li>
</ul>
</li>
<li><p>色准<br>色准就是颜色显示是否准确，目前一般使用 ΔE（色彩偏离度） 来表示，越大表示与标准色彩差距越大，一般来说低于1就是很优秀的专业屏幕了。色准可以通过自己进行校色，部分降低色彩偏离度，提高色准。</p>
</li>
</ul>
<p>  显示器的指标其实是很复杂的，还有亮度，游戏关心的刷新率，色深等等，我这里仅仅只介绍对颜色影响至关重要的两个参数。</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/26/less%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Geylnu">
      <meta itemprop="description" content="记录我的前端学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello!">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/07/26/less%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">less入门</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-07-26 14:41:48" itemprop="dateCreated datePublished" datetime="2018-07-26T14:41:48+00:00">2018-07-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-31 16:27:02" itemprop="dateModified" datetime="2021-05-31T16:27:02+00:00">2021-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/css/" itemprop="url" rel="index"><span itemprop="name">css</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><h2 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h2><ul>
<li><p>颜色</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@bgColor:</span> <span class="number">#34c5c5</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="variable">@bgColor</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>url</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@url:</span> <span class="string">&quot;./xxx/&quot;</span></span><br><span class="line"></span><br><span class="line">body&#123;</span><br><span class="line">    <span class="attribute">background</span>: url(<span class="string">&quot;@&#123;url&#125;dog.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后url就会被合成，方便改路径</p>
</li>
<li><p>声明值</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@background:</span> &#123;<span class="attribute">background</span>:red;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="variable">@background</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h1><p>可以把选择器写在括号中，表示下一级选择器</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">  <span class="selector-class">.navigation</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.logo</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解析完毕后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.navigation</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.logo</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&amp;表示当前选择器的父选择器</p>
<h1 id="混合"><a href="#混合" class="headerlink" title="混合"></a>混合</h1><p>可以在css中使用其它选择器里定义的属性，比如</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bordered</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: dotted <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#111</span>;</span><br><span class="line">  <span class="selector-class">.bordered</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/09/MVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Geylnu">
      <meta itemprop="description" content="记录我的前端学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello!">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/07/09/MVC/" class="post-title-link" itemprop="url">MVC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-07-09 22:40:20" itemprop="dateCreated datePublished" datetime="2018-07-09T22:40:20+00:00">2018-07-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-31 16:27:02" itemprop="dateModified" datetime="2021-05-31T16:27:02+00:00">2021-05-31</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>M:Model<br>V:view<br>c:controller</p>
<p>模块化 把每个分成一个个js小文件<br>每个模块把操作的html作为一个view，作为v（我觉得应该是model）<br>再生成一个controller，参数是view，接受view进行操作</p>
<p>这里最好将controller封装成一个对象，像下面这样</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> controller = &#123;</span><br><span class="line">    view: <span class="literal">null</span>,</span><br><span class="line">    init: <span class="function"><span class="keyword">function</span> (<span class="params">view</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.view = view</span><br><span class="line">        <span class="built_in">this</span>.bindEvents()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bindEvents: <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        xxx.addListener(<span class="string">&#x27;xxx&#x27;</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">            xxx</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>值得注意的是监听函数中调用的是触发事件本身的元素，也就是这里取this取到的不是controller对象本身，这种情况可以使用箭头函数，箭头函数自身不具有this，使用的this向上寻找到的对象就是正确的了。</p>
<p>同时由于多个模块相互分离，并不知道其它模块的情况，可能出现全局变量污染的情况，因此，需要使用立即执行函数。</p>
<p>js中在ES6前不能使用<code>&#123;&#125;</code>包裹创建局部变量，避免全局变量污染可以使用<code>function</code>的创建局部变量环境。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">xxx</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;.call()</span><br></pre></td></tr></table></figure>
<p>但是这个方案实际还是存在问题，xxx其实也是一个全局变量</p>
<p>升级版就出现了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;.call()</span><br></pre></td></tr></table></figure>
<p>然而遗憾的是这个方法会报语法错误</p>
<p>再升级版</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">&#125;.call()</span><br></pre></td></tr></table></figure>
<p>使用其它单目运算符也能起到一样的效果，整个包裹大括号也是可行的，但可能出现bug,比如被视为函数实参。<br>还可以用随机数，不过有点丑陋</p>
<p>同时还可以使用闭包</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> person =&#123;&#125;</span><br><span class="line">    person.name = <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">    <span class="built_in">window</span>.getname = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> person.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/ajax%E5%88%9D%E6%8E%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Geylnu">
      <meta itemprop="description" content="记录我的前端学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello!">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/11/ajax%E5%88%9D%E6%8E%A2/" class="post-title-link" itemprop="url">ajax初探</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-06-11 23:05:10" itemprop="dateCreated datePublished" datetime="2018-06-11T23:05:10+00:00">2018-06-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-31 16:27:02" itemprop="dateModified" datetime="2021-05-31T16:27:02+00:00">2021-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javaScript/" itemprop="url" rel="index"><span itemprop="name">javaScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="如何向后端请求数据？"><a href="#如何向后端请求数据？" class="headerlink" title="如何向后端请求数据？"></a>如何向后端请求数据？</h1><ul>
<li><p>form表单提交，使用method指定提交方式,action为提交的地址。</p>
</li>
<li><p>a标签点击能发请求<br>这两者都要刷新页面或者新开页面</p>
</li>
<li><p>img可以发请求，但请求的必须是图片 不需要增加到页面</p>
</li>
<li><p>script和link也可以发起请求，但link和script只能加载指定格式，但是需要加到页面</p>
</li>
</ul>
<p>之后，ie5在js中引入ActiveX对象（api），使js可以直接发起http请求<br>随后其它浏览器也跟进，取名<code>XMLHttpRequest</code><br>不到一年，谷歌推出gmail.com,这里可以说前端真正诞生了</p>
<p>ie6后来也成为了安装最多的浏览器60%,ie因此就膨胀了,随后微软拆开ie6的开发人员，只更新安全功能，让chrome也跟了上来</p>
<h2 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h2><p>Jesse James Garrett 将一下技术取名AJAX（异步的javaScript和 XML</p>
<ol>
<li>使用XMLHttpRequest发请求</li>
<li>服务器返回xml格式的字符串</li>
<li>js解析xml，并更新局部页面(现在用JSON)</li>
</ol>
<p>使用<code>XMLHttpRequest</code>的方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">myButton.addEventListener(<span class="string">&#x27;click&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> request = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">    request.open(<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;/XXX&#x27;</span>) <span class="comment">//初始化配置  请求方式忽略大小写  默认异步</span></span><br><span class="line">    request.onreadystatechange = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (request.readyState === <span class="number">4</span> &amp;&amp; request.status === <span class="number">200</span>)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(request.responseText) <span class="comment">//响应内容</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    request.send() <span class="comment">//发送</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>网络响应的时间会很长，这段时间已经够javaScript执行很多任务了，所以需要使用异步</p>
<p><strong>readystate</strong></p>
<table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center"><code>open()</code>方法还没有被调用</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center"><code>send()</code>方法还没有被调用</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>send()</code>方法已被调用，响应头和响应状态码已经返回</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">正在下载响应体</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">请求全部完成</td>
</tr>
</tbody></table>
<p>onreadystate 要注意放在前面</p>
<p>一般不用管300状态码. 浏览器会自动处理</p>
<h2 id="解析数据"><a href="#解析数据" class="headerlink" title="解析数据"></a>解析数据</h2><p>可以使用DOM api解析xml，但是很复杂，现在已经过时了。<br>1所以用什么更好的方法更好的表示数据呢？</p>
<p>后来道格拉斯·克罗克福发明了一种轻量的资料语言<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-hans/JSON">JSON</a></p>
<h3 id="JSON语法"><a href="#JSON语法" class="headerlink" title="JSON语法"></a>JSON语法</h3><p>JSON支持<code>object</code> <code>array</code>两种数据组织方式，值支持<code>string</code> <code>number</code> <code>object</code> <code>array</code> <code>true</code> <code>false</code> <code>null</code><br>没有<code>undefined</code></p>
<p>json没有变量，不支持引用，没有原型链</p>
<ul>
<li>string 必须具有<code>&quot;&quot;</code><br>支持转义符<code>\\</code></li>
</ul>
<p>注意，永远返回的是字符串，只是将其解析为对象<br>解析:<code>JSON.parse(string)</code></p>
<h2 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h2><p>同源策略要求协议+端口+域名一模一样才允许发起AJAX请求，保证安全</p>
<p>本质是禁止一个域名的js在未经允许的情况下，不得读取另一个域名的内容。但浏览器并不阻止向另一个域名发送请求。</p>
<p>不是同源的网页不能使用ajax发起请求（实际上发起了，只是不能读取内容），其他都可以</p>
<p>简单规避方法就是使用CORS,服务端设置<code>Access-Control-Allow-Origin: xxx</code>响应头 表示允许xxx跨域访问</p>
<h2 id="设置header"><a href="#设置header" class="headerlink" title="设置header"></a>设置header</h2><p>必须在open()和send()之间调用。<br>send()可以为post 设置请求内容</p>
<p>getAllResponseHeader获得所有响应头</p>
<p>tcp进行分片传输，因此会先拿到先拿到最开始的状态包，就可以先判断是否需要继续接受等之后的逻辑</p>
<p>传多个变量很容易让别人不知道自己具体想传什么，这里可以采用传个对象的方式，这样就有名字了</p>
<p>设置header 接受多参数</p>
<p>析构赋值，把名字一样的赋到同名变量里</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">param = &#123;<span class="attr">a</span>:<span class="string">&#x27;aga&#x27;</span>,<span class="attr">b</span>:<span class="string">&#x27;gag&#x27;</span>,<span class="attr">c</span>:<span class="string">&#x27;aga&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;a,b,c&#125; = param</span><br></pre></td></tr></table></figure>
<p>对于函数可以采用这个方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">&#123;a,b,c&#125;</span>)</span>&#123;<span class="comment">//取得参数中的abc</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还有很多方式比如对象键名为字符串，不可以调用变量，但是<code>[x]: sss</code>可以</p>
<p>自己写回调可能不同库不一样，回调函数名不统一，所以需要规范出来</p>
<p>Promise写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.then() <span class="comment">//第一个是成功第二个是失败</span></span><br></pre></td></tr></table></figure>

<p>具体写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line"> xxx</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/10/JSONP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Geylnu">
      <meta itemprop="description" content="记录我的前端学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello!">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/10/JSONP/" class="post-title-link" itemprop="url">JSONP</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-06-10 19:32:03" itemprop="dateCreated datePublished" datetime="2018-06-10T19:32:03+00:00">2018-06-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-31 16:27:02" itemprop="dateModified" datetime="2021-05-31T16:27:02+00:00">2021-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javaScript/" itemprop="url" rel="index"><span itemprop="name">javaScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="为什么要使用JSONP？"><a href="#为什么要使用JSONP？" class="headerlink" title="为什么要使用JSONP？"></a>为什么要使用JSONP？</h1><p>在早期，访问html页面必须进行跳转，页面的展示也依靠点击超链接，由于加载一个新页面，这不可避免的需要进行刷新。<br>有些利用页面种嵌入<code>iframe</code>，点击链接/按钮<code>iframe</code>访问页面，达到页面不刷新的目的，这种实现方式很丑陋。</p>
<p>而JSONP是一种更方便的更新数据方式，类似于现在的<code>ajax</code></p>
<h1 id="JSONP具体是怎么做的"><a href="#JSONP具体是怎么做的" class="headerlink" title="JSONP具体是怎么做的?"></a>JSONP具体是怎么做的?</h1><ol>
<li>创建一个随机的函数名，</li>
<li>创建一个<code>&lt;script&gt;</code>,并将<code>src</code>指向要访问的后端服务器地址，如<code>/?callback=函数名</code></li>
<li>将<code>&lt;script&gt;</code>加入文档就会立即向指定地址发起请求</li>
<li>服务器收到请求，将数据写入自己要返回的内容中，如<code>函数名(参数)</code>，</li>
<li>客户端收到，立即执行了<code>&lt;script&gt;</code>中的内容，也就是<code>函数名(参数)</code>,通过这种方式就完成了动态的更新。</li>
</ol>
<p>JSONP参数可以是任意的，不过为了统一，一般使用<code>callback=</code>这种调用。</p>
<p>JSONP的请求是跨域的，后端服务器只要实现了<code>callback</code>调用，就可以直接使用。但同时由于使用的是动态加载<code>&lt;script&gt;</code>资源，JSONP只能使用<code>get</code>方式请求资源。</p>
<p>jQuery对其进行了封装，调用方式如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url: <span class="string">&quot;xxxx&quot;</span></span><br><span class="line">    dateType: <span class="string">&#x27;jsonp&#x27;</span></span><br><span class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">A</span>)</span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>我的简单实现可以在<a target="_blank" rel="noopener" href="https://github.com/Geylnu/nodeServerDemo/blob/master/main.js">这里</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/04/DOM%E4%BA%8B%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Geylnu">
      <meta itemprop="description" content="记录我的前端学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello!">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/04/DOM%E4%BA%8B%E4%BB%B6/" class="post-title-link" itemprop="url">DOM事件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-06-04 23:08:26" itemprop="dateCreated datePublished" datetime="2018-06-04T23:08:26+00:00">2018-06-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-31 16:27:02" itemprop="dateModified" datetime="2021-05-31T16:27:02+00:00">2021-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javaScript/" itemprop="url" rel="index"><span itemprop="name">javaScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="DOM标准"><a href="#DOM标准" class="headerlink" title="DOM标准"></a>DOM标准</h1><h2 id="标准前的标准"><a href="#标准前的标准" class="headerlink" title="标准前的标准"></a>标准前的标准</h2><p>在未指定标准前就已经有了事实上的标准<br>如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">button.onclick = <span class="function"><span class="keyword">function</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="DOM1"><a href="#DOM1" class="headerlink" title="DOM1"></a>DOM1</h2><p>有了更多的事件</p>
<ul>
<li>blur</li>
<li>click</li>
<li>focus</li>
<li>select</li>
</ul>
<h2 id="DOM2"><a href="#DOM2" class="headerlink" title="DOM2"></a>DOM2</h2><p>事件被单独列出来，有了拥有了事件流，事件捕获，事件冒泡，事件取消，也是最广泛的版本</p>
<h1 id="事件详解"><a href="#事件详解" class="headerlink" title="事件详解"></a>事件详解</h1><h2 id="声明方式"><a href="#声明方式" class="headerlink" title="声明方式"></a>声明方式</h2><ol>
<li><p>内联声明</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">xxx</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;xxx&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;xxx()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;xxx.call&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这种方式比较奇怪的时第一种方式无效，下面两种方式有效，实际上这里等同于<code>eval(xxx())</code></p>
</li>
<li><p>js声明</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">xxx</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">button.onclick = xxx</span><br><span class="line">button.addListener(<span class="string">&#x27;click&#x27;</span>,xxx,options)</span><br></pre></td></tr></table></figure></li>
<li><p><code>onclick</code>与<code>addListener</code>的区别<br>前者是一个属性，只能赋值一个，后者是一个队列，可以监听多个事件，并按照声明顺序触发。<br>除此之外，第三个参数还可以指定一些布尔值</p>
</li>
</ol>
<h2 id="事件模型"><a href="#事件模型" class="headerlink" title="事件模型"></a>事件模型</h2><h3 id="捕获与冒泡"><a href="#捕获与冒泡" class="headerlink" title="捕获与冒泡"></a>捕获与冒泡</h3><p>在DON的事件模型中，事件传播被分为两个阶段，首先某事件触发后，会把该事件从父标签一级级传递给最终的子标签，这个阶段叫做捕获阶段，最终的子标签得到这个事件后，再把这个事件一级级返回到最上层父标签，这个过程叫做冒泡阶段，默认声明的事件是在冒泡阶段触发。值得注意的是，最终的子标签并不区分冒泡或捕获阶段，声明的多个事件按照声明先后触发。</p>
<p>如果只指定一个布尔值，则指是否在捕获阶段捕获事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">button.addListener(<span class="string">&#x27;click&#x27;</span>,xxx,ture)</span><br></pre></td></tr></table></figure>
<p>默认为在冒泡阶段捕获，也就是此值为false</p>
<p>阻止传播：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">e</span>)</span>&#123;</span><br><span class="line">    e.stopPropagation()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>另外jquery()的阻止默认事件是直接传false</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(xxx).on(<span class="string">&#x27;click&#x27;</span>,<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>


<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="怎么达到点击别处关闭浮层的效果"><a href="#怎么达到点击别处关闭浮层的效果" class="headerlink" title="怎么达到点击别处关闭浮层的效果?"></a>怎么达到点击别处关闭浮层的效果?</h3><p>在<code>document</code>的冒泡阶段监听click事件，如果监听到就关闭浮层，而在浮层上监听click事件，阻止click事件冒泡。</p>
<p>我们还可以不使用阻止冒泡，我们在浮层被点击后添加一个0定时器，监听<code>document</code>，定时器会在空闲时触发，也就是当前事件传播结束，OK。</p>
<p>实现轮播细节<br>把第一张和最后一张复制到前面和后面，这里用<code>clone(true)</code>进行深克隆<br>复制后还要让其显示第二张</p>
<p><code>hidden()</code>再<code>show()</code>就可以隐藏动画,但是短时间的操作浏览器会合并,<code>offset()</code>可以让css立即生效而不计算</p>
<p>jquery还可以监听所有子元素的，为其添加事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;xxx&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>,<span class="string">&#x27;button&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>))</span></span><br></pre></td></tr></table></figure>
<p>这里 第二个参数是选择器</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/29/%E9%BA%BB%E7%83%A6%E7%9A%84%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Geylnu">
      <meta itemprop="description" content="记录我的前端学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello!">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/29/%E9%BA%BB%E7%83%A6%E7%9A%84%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F/" class="post-title-link" itemprop="url">麻烦的全局变量</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-05-29 08:22:10" itemprop="dateCreated datePublished" datetime="2018-05-29T08:22:10+00:00">2018-05-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-31 16:27:02" itemprop="dateModified" datetime="2021-05-31T16:27:02+00:00">2021-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javaScript/" itemprop="url" rel="index"><span itemprop="name">javaScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>当我们使用下面的div的id是会发现得到的并不是我们想要的</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;parent&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(parent) <span class="comment">//window</span></span><br></pre></td></tr></table></figure>

<p>全局变量很容易造成变量名冲突，应该尽量少的使用全局变量</p>
<h3 id="构建局部作用域"><a href="#构建局部作用域" class="headerlink" title="构建局部作用域"></a>构建局部作用域</h3><p>既然不能创建全局变量，我们就应该创建一个局部作用域<br>在使用<code>let</code>的情况下，一对<code>&#123;&#125;</code>就可以包含一个局部作用域，但在使用<code>var</code>的情况下，我们需要使用函数创建局部作用域。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;.call()</span><br></pre></td></tr></table></figure>
<p>在一些浏览器中会遇到语法错误，我们可以使用<code>()</code>包裹整个函数，也可以在前面加上<code>-</code>或者<code>+</code>,或者<code>!</code>，只要是单目运算符都可以 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/28/%E8%87%AA%E5%B7%B1%E8%AF%95%E8%AF%95%E5%86%99%E4%B8%AAjQuery%E5%B0%8Fdemo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Geylnu">
      <meta itemprop="description" content="记录我的前端学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello!">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/28/%E8%87%AA%E5%B7%B1%E8%AF%95%E8%AF%95%E5%86%99%E4%B8%AAjQuery%E5%B0%8Fdemo/" class="post-title-link" itemprop="url">自己试试写个jQuery小demo</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-05-28 23:58:54" itemprop="dateCreated datePublished" datetime="2018-05-28T23:58:54+00:00">2018-05-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-31 16:27:02" itemprop="dateModified" datetime="2021-05-31T16:27:02+00:00">2021-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javaScript/" itemprop="url" rel="index"><span itemprop="name">javaScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="要达到的效果"><a href="#要达到的效果" class="headerlink" title="要达到的效果"></a>要达到的效果</h2><p>我需要这个小demo可以在接受Node的实例和选择器，并且可以立即调用相关的操作方法</p>
<h2 id="侵入式或者非侵入式？"><a href="#侵入式或者非侵入式？" class="headerlink" title="侵入式或者非侵入式？"></a>侵入式或者非侵入式？</h2><p>我其实可以直接在Node的原型对象上加上我自己写的方法，其它什么都不用做，不过这种方式会霸占变量名，而且更改了原来的原型对象，很容易带来冲突 ，所以可以选择自己新增一个方法，从这个方法里调用原来Node的方法，不对原来的Node做任何变动，这种方式叫就非侵入式。</p>
<h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><p>这里其实有两种实现方法，一种是直接用函数构造出具有相关方法属性的对象，一次搞定。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">xxx</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> x =&#123;&#125;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">//找到的Node实例加到x种</span></span><br><span class="line">    x.a =<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>另一种是构造出相关属性的对象，再构造一个拥有相关方法的原型，将__proto__指向原型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> yyy =&#123;</span><br><span class="line">    x:<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">xxx</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> x =&#123;&#125;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">//找到的Node实例加到x种</span></span><br><span class="line">    x.__proto__=yyy</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>后面这种方式会更好一点,不过先使用前一种种方式实现一次</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.jQuery = <span class="function"><span class="keyword">function</span> (<span class="params">nodeOrSelection</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> elements = &#123;&#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> nodeOrSelection === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = <span class="built_in">document</span>.querySelectorAll(nodeOrSelection)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; temp.length; i++) &#123;</span><br><span class="line">            elements[i] = temp[i]</span><br><span class="line">        &#125;</span><br><span class="line">        elements.length = temp.length</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nodeOrSelection <span class="keyword">instanceof</span> Node) &#123;</span><br><span class="line">        elements[<span class="number">0</span>] = nodOrSelection</span><br><span class="line">        elements.length = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    elements.addClass = <span class="function"><span class="keyword">function</span> (<span class="params">nodeClass</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; elements.length; i++) &#123;</span><br><span class="line">            elements[i].classList.add(nodeClass)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    elements.setText = <span class="function"><span class="keyword">function</span> (<span class="params">text</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; elements.length; i++) &#123;</span><br><span class="line">            elements[i].textContent = text</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> elements</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.$ = jQuery</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;li&#x27;</span>).addClass(<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">$(<span class="string">&#x27;li&#x27;</span>).setText(<span class="string">&#x27;hi&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>这里还可以写个自己的forEach，这样不用每次都自己写遍历了。<br>OK.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Geylnu</p>
  <div class="site-description" itemprop="description">记录我的前端学习</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">38</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Geylnu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
