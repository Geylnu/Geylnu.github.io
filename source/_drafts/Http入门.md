---
title: Http入门
date: 2018-03-29 22:05:47
tags:
categories:
---
# 前言
第一次开始尝试理解Http协议的时候是大一下吧，那时候在慕课上学完了浙大翁恺老师的java程序相关课程(我学的第一门程序语言)，因为学校每次内网登陆都要在网页输入一次密码，我就想干脆用java写个自动登陆的小脚本，并且当时选课临近，还想用这个脚本（爬虫）用来抢课，捡课，然后边查边写，之前是对HTTP一点都不了解。

很快就遇上了麻烦，正确的提交了参数，但是总是通不过验证，一次次检查自己代码是否错误，还是解决不了，就去问群里问了一下，可能我描述的有问题，别人也不知道我哪里除了问题，只是提了个Session，我去百度才恍然大悟，我没设置cookie……挺搞笑的。

在过程中学会了很多东西，最基本的chrome抓包，请求方法，cookie,字符集,URL编码，refer。

最近读了《图解http》(读完感觉不太适合我)，也看了一些其它的东西，这篇文章就稍微来理一理，以后学了相关的新东西就也向这里塞。

# 我们是怎样互相联网的？
我们目前大多通过以太网进行连接的，数据怎样在以太网传输和拓扑结构我也不太懂，这暂且不谈，不过在以太网中，想要相互数据传输总是需要辨别对方是谁，叫什么名字，MAC地址就是为这而生，每个网卡在诞生之后，都会有一个全世界唯一的MAC地址，每次传输，都必须知道对方的MAC地址。

早期的互联网有着许多标准，难以让不同规格的网络连接在一起，为了让即使不同的网络也能连接在一起，ip协议就诞生了，ip协议只负责在不同网络追踪寻址，而由TCP协议来保证传输的可靠性，保证数据的完整到达，因此会对数据进行分片、排序，这自然会增加TCP的延迟，传输效率也相对缓慢，与之相对的就是UDP协议，协议本身不对可靠性做任何保证，直接由上层的应用（程序）自己决定如何控制。

由于在同一台电脑上，可能由许多个程序在同时运行，不断的进行网络连接，ip协议只能区分出一台主机，但是不能区分出同一台主机上的不同程序，当然，程序自然能够自己在数据的传输中添加辨识的方法，但用统一的解决办法有着更好的适用性，使用端口还有更好的协议可扩展性，因此TCP/UDP提供了端口的设计，端口范围从0到65535（2^16-1），前1024个是保留端口，作为知名的服务器端口，通常不会被其他程序占用。

## 怎样理解IP/TCP协议？
以上的各种书面解释在百科都有，更详细，但是有个问题，就是**不说人话**，往往看了一段文字后不知何物，我想以自己的理解来形象的说说这些东西，但是我也是小白，我的理解可能有很大的偏差。

首先第一点IP/TCP协议就是一个解决传输的问题，这其实很我们现实世界寄个包裹没什么区别。

***************
网络世界早些年的时候，有很多个国家（不同的网络类型），由于语言不通（传输的数据格式不一样），邮件（数据）难以在不同的国家进行传输，为了解决这个问题IP/TCP协议就诞生了。

时过境迁，到了我们这个时候，许多国家都被以太网国消灭（淘汰）了，网络世界都处于以太网国的控制之下，我们这篇短文也只讲在以太网网的控制之下的情况。

在以太网国，每个要发邮件的家庭（计算机）都有一邮箱（网卡），邮箱有一串全国唯一的一串数字，它也被称作MAC地址，像是这样：B0-25-c3-A1-75-BE。

早期邮件通过一个邮递员传递（总线），想要互相发邮件，只需要拥有MAC地址的邮箱和一个邮递员就够了，大家很开心的一起互发邮件。

慢慢的搬来的家庭越来越多，想通过邮箱发送邮件的人越来越多，这就出现问题了，邮递员只有一个，邮箱很多个，这个邮递员一次只能把一家的邮件送给另一家，一个邮递员慢死了，怎么办？加邮递员！还解决不了?再加！

邮递员多了，但是办事效率还是很低，主要因为邮递员不好记邮箱上的MAC地址，每次发邮件都要一个个确认，还会打扰到其它家庭，最后想了个办法，在这栋楼下设置一个专门的邮局（交换机），每个邮递员只负责邮局和家庭的邮件传递，邮局内部有一张表，把每个邮递员和其送达的家庭邮箱都记住，这样邮件传输的就更快了。

这栋楼的家庭发邮件的问题解决了，但是和其它楼的家庭沟通怎么办？，再设置一个邮局？这个邮局又怎么知道发给谁？跨国又怎样传输？

网络世界早些年的时候，有很多个国家（不同的网络类型），由于语言不通（传输的数据格式不一样），邮件（数据）难以在不同的国家进行传输，为了解决这个问题IP/TCP协议就诞生了。

时过境迁，到了我们时候，许多国家都被以太网国消灭了，网络世界都处于以太网国的控制之下，我们这篇短文也只讲
13:51:36
我的电脑 2018/3/30 13:51:36


注意*我应该在前面添加住户不知道邮局转发了，发送的目地地还是邮箱地址

正好这时ip/tcp协议出现了，ip/tcp不关心你是通过邮箱还是电话，只要你遵守ip/tcp协议，你的数据在任何国家都可以被解析和传递的，我们可以以以太网为例，看看ip/tcp协议在这其中的应用

现在住户想发送一个国际邮件，向远方朋友问好，不过多了个新东西，ip协议，住户自己也不懂，邮递员，邮局也不懂，怎么办？当然只有聘请一个懂ip协议的人住在自己家，充当沟通的媒介了。这里我们暂且就叫这个人叫寻址员了。

寻址员勤勤恳恳，每天住户起床时，就会让邮递员向所有其它人发送一封邮件，询问：`你是中心邮局（网关）吗？如果是的话，请告诉你的邮箱MAC地址，并请给我分配一个ip`，这个邮件被送到邮局，邮局再把这个邮件送到其它楼房，最后终于发送到了（中心邮局）那里，中心邮局（网关）又是什么呢？中心邮局（网关）其实也是一个邮局，为了和其它住户直接沟通，它也拥有一个邮箱，具有MAC地址，还有许多其它功能，现实中其实它可能就是个路由器。

中心邮局（网关）收到寻址员的邮件，从自己拥有的ip地址（111.61.3.33）里抽一个给分配给寻址员，OK，现在寻址员就拥有一个中心邮局（网关）分配的ip地址了，除此之外，还有一个子网掩码（255.255.255.0）。

寻址员得到ip地址及子网掩码等信息，开始做一张路由表，比如每个寻址员都默认127.0.0.1就是住户本身，会回给住户，寻址员还通过子网掩码确定。

11111，11，，准备给23.58.66.73的发送一声问候`嘿！早上好`，交给寻址员（ip层），寻址员得到了，从自己那里比对路由表，路由表







